<div class="dashboard-container">
  <lib-toolbar title="Portfolio Dashboard">
    <lib-action-menu
      [config]="actionMenuConfig"
      (itemSelected)="onActionMenuItemSelected($event)"
    />
  </lib-toolbar>

  <div class="dashboard-content">
    @if (portfolios().length === 0) {
      <!-- Empty State -->
      <lib-empty-state
        [icon]="'account_balance_wallet'"
        [title]="'No Portfolios Yet'"
        [message]="'Get started by creating your first portfolio to track your investments'"
        [buttonConfig]="{ label: 'Create Portfolio' }"
        (actionClick)="onCreatePortfolio()"
      />
    } @else {
      <!-- Portfolio Selection -->
      <lib-card title="Select Portfolio">
        <lib-select 
          label="Choose a portfolio" 
          [options]="portfolioOptions()"
          [selected]="selectedPortfolioId()"
          (selectionChange)="onPortfolioSelect($event)">
        </lib-select>
      </lib-card>

      <!-- Asset List -->
      @if (selectedPortfolioId()) {
        <lib-card title="Portfolio Assets" [subtitle]="assets().length + ' positions'">
          @if (assets().length === 0) {
            <!-- Empty State for Assets -->
            <lib-empty-state
              [icon]="'inventory_2'"
              [title]="'No Assets Yet'"
              [message]="'Add your first asset to start tracking this portfolio'"
              [buttonConfig]="{ label: 'Add Asset' }"
              (actionClick)="onAddAsset()"
            />
          } @else {
            <lib-table 
              [data]="assets()" 
              [columns]="assetColumns"
              [actionsTemplate]="assetActions">
            </lib-table>
          }
        </lib-card>
      }
    }
  </div>
</div>

<!-- Asset Actions Template -->
<ng-template #assetActions let-asset>
  <div class="asset-actions">
    <lib-action-menu
      [config]="getAssetActionsMenuConfig(asset)"
      (itemSelected)="onAssetActionSelected(asset, $event)"
    />
  </div>
</ng-template>
